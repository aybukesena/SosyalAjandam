@model SosyalAjandam.Models.ViewModels.PlannerResultViewModel
@using SosyalAjandam.Models

<div class="row g-4">
    @foreach (var dayGroup in Model.PlannedTasks.GroupBy(t => t.Date).OrderBy(g => g.Key))
    {
        <div class="col-md-4">
            <div class="glass-card p-3 h-100 border border-secondary">
                <h5 class="text-neon-blue border-bottom border-secondary pb-2 mb-3">
                    @dayGroup.First().Day <small class="text-secondary ms-2" style="font-size: 0.7em;">@dayGroup.Key.ToShortDateString()</small>
                </h5>
                <ul class="list-unstyled">
                    @foreach (var task in dayGroup)
                    {
                        string priorityClass = task.Priority == PriorityLevel.High ? "text-danger" 
                                             : task.Priority == PriorityLevel.Medium ? "text-warning" 
                                             : "text-info";
                        
                        <li class="mb-3 d-flex align-items-center justify-content-between p-2 rounded glass-panel planned-task-item" 
                            data-title="@task.Title" 
                            data-date="@task.Date.ToString("yyyy-MM-dd")"
                            data-priority="@((int)task.Priority)"
                            data-duration="@task.DurationDescription">
                            
                            <div class="d-flex align-items-center gap-2">
                                <i class="bi bi-circle-fill @priorityClass" style="font-size: 8px;"></i>
                                <span class="text-light">@task.Title</span>
                            </div>
                            
                            <div class="d-flex align-items-center gap-2">
                                <span class="badge bg-transparent border border-secondary text-secondary" style="font-size: 0.75rem;">
                                    <i class="bi bi-stopwatch me-1"></i> @task.DurationDescription
                                </span>
                            </div>
                        </li>
                    }
                </ul>
            </div>
        </div>
    }
</div>

<div class="row mt-4">
    <div class="col-12 text-center d-flex justify-content-center gap-3">
        <button class="btn btn-outline-light rounded-pill px-4" onclick="retryPlan()">
            <i class="bi bi-arrow-counterclockwise me-2"></i> Yeni Plan Olu≈ütur
        </button>
        <button class="btn btn-success rounded-pill px-5 neon-glow-green" onclick="confirmPlan()">
            <i class="bi bi-check-lg me-2"></i> Onayla ve Ajandama Ekle
        </button>
    </div>
</div>
